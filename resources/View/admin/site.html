{{define "admin/site.html"}}
    {{template "header"}}
        <style>
            .pt20{
                padding-top: 20px;
            }
            .pb20{
                padding-bottom: 20px;
            }
        </style>
    <body>
    <div class="x-nav">
          <span class="layui-breadcrumb">
            <a href="javascript:;">首页</a>
            <a href="javascript:;">基础信息</a>
            <a>
              <cite>{{.title}}</cite></a>
          </span>
        <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" onclick="location.reload()" title="刷新">
            <i class="layui-icon layui-icon-refresh" style="line-height:30px"></i></a>
    </div>
    <div class="layui-fluid">
        <div class="layui-row">
            <div class="layui-col-md10">
                <div class="layui-card">
                    <form id="addform">
                        <input type="hidden" id="id" name="id">
                        <div class="layui-form-item pt20">
                            <label for="site_title" class="layui-form-label">网站标题</label>
                            <div class="layui-input-block">
                                <input type="text" id="site_title" name="site_title" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label for="site_desc" class="layui-form-label">网站描述</label>
                            <div class="layui-input-block">
                                <textarea placeholder="请输入网站描述" id="site_desc" name="site_desc" class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label for="desc" class="layui-form-label">关键字</label>
                            <div class="layui-input-block">
                                <textarea placeholder="请输入网站关键字" id="site_keyboard" name="site_keyboard" class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="username" class="layui-form-label">网站版权</label>
                            <div class="layui-input-block">
                                <input type="text" id="site_copyright" name="site_copyright" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="username" class="layui-form-label">手机号码</label>
                            <div class="layui-input-block">
                                <input type="text" id="site_tel" name="site_tel" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="username" class="layui-form-label">400电话</label>
                            <div class="layui-input-block">
                                <input type="text" id="client_tel" name="client_tel" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="username" class="layui-form-label">座机电话</label>
                            <div class="layui-input-block">
                                <input type="text" id="land_line" name="land_line" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="username" class="layui-form-label">网站邮箱</label>
                            <div class="layui-input-block">
                                <input type="text" id="site_email" name="site_email" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="username" class="layui-form-label">地址</label>
                            <div class="layui-input-block">
                                <input type="text" id="site_address" name="site_address" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label for="username" class="layui-form-label">备案号</label>
                            <div class="layui-input-block">
                                <input type="text" id="record_number" name="record_number" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item pb20">
                            <label for="L_repass" class="layui-form-label"></label>
                            <button class="layui-btn subCon">提交</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
        <script type="application/javascript">
            $(".subCon").on("click", function () {
                if ($("#addform #site_title").val() == "") {
                    sweetAlert("登录失败","网站标题不能为空",'error');
                    return false;
                }
                if ($("#addform #site_desc").val() == "") {
                    sweetAlert("登录失败","网站描述不能为空",'error');
                    return false;
                }
                if ($("#addform #site_keyboard").val() == "") {
                    sweetAlert("登录失败","网站关键字不能为空",'error');
                    return false;
                }
                if ($("#addform #site_keyboard").val() == "") {
                    sweetAlert("登录失败","网站关键字不能为空",'error');
                    return false;
                }
                if ($("#addform #land_line").val() == "" && $("#addform #client_tel").val() == "" && $("#addform #client_tel").val() == "") {
                    sweetAlert("登录失败","电话联系方式，必须填写一项",'error');
                    return false;
                }
                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: "/api/v1/addSite",
                    data: $("#addform").serialize(),
                    success: function (result) {
                        if (Number(result.code) == 200) {
                            swal({title:"操作成功",type: 'success'},function () {
                                getSiteInfo()
                            })
                        } else {
                            sweetAlert("登录失败",result.msg,'error');
                            return false;
                        }
                    }
                });
                return false
            })
            getSiteInfo()
            function getSiteInfo() {

                $.ajax({
                    type: "GET",
                    dataType: "json",
                    url: "/api/v1/getSite",
                    success: function (result) {
                        if (Number(result.code) == 200) {
                            $("#addform #id").val(result.data.id)
                            $("#addform #site_title").val(result.data.site_title)
                            $("#addform #site_desc").val(result.data.site_desc)
                            $("#addform #site_keyboard").val(result.data.site_keyboard)
                            $("#addform #site_copyright").val(result.data.site_copyright)
                            $("#addform #site_tel").val(result.data.site_tel)
                            $("#addform #land_line").val(result.data.land_line)
                            $("#addform #client_tel").val(result.data.client_tel)
                            $("#addform #site_email").val(result.data.site_email)
                            $("#addform #site_address").val(result.data.site_address)
                            $("#addform #record_number").val(result.data.record_number)
                        }
                    }
                });
            }
        </script>
    </body>
    </html>
{{end}}