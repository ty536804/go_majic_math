{{define "admin/login.html"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>后台登录 - {{.title}}</title>
    <meta name="keywords" content="后台登录">
    <meta name="description" content="后台登录">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/login.css" rel="stylesheet">
    <script>
        if(window.top!==window.self){window.top.location=window.location};
    </script>
</head>

<body class="signin">
<div class="signinpanel">
    <div class="row">
        <div class="col-sm-7 animated fadeInLeft">
        </div>
        <div class="col-sm-5 animated fadeInRight">
            <form id="addform" name="addform">
            <p class="login-title">登录</p>
                <p class="m-t-md" style="color:#666">登录到{{.title}}系统后台管理</p>
                <input type="text" class="form-control uname" name="uname" value="" required placeholder="用户名" />
                <input type="password" class="form-control pword m-b" name="pword" required placeholder="密码" />
            <p></p>
            <button class="btn btn-success btn-block" id="loginButton" name="loginButton">登录</button>
            </form>
        </div>
    </div>
</div>
<script type="text/javascript" src="/static/js/jquery.min.js?v=2.1.4"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js?v=3.3.6"></script>
<script type="text/javascript" src="/static/plugins/sweetalert/sweetalert.min.js"></script>
<script type="application/javascript">
    $(function () {
        $('#loginButton').on('click', function () {
            if ($.trim($(".uname").val()) == "") {
                sweetAlert("操作失败","用户名不能为空",'error');
                return false;
            }

            if ($.trim($(".pword").val()) == "") {
                sweetAlert("操作失败","密码不能为空",'error');
                return false;
            }
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/login",
                data: $("#addform").serialize(),
                success: function (result) {
                    console.log(result.msg)
                    if (Number(result.code) == 200) {
                        window.location.href = "/api/v1/show";
                    } else {
                        sweetAlert("操作失败",result.msg,'error');
                    }
                },
                error: function (result) {
                    $.each(result.responseJSON, function (k, val) {
                        sweetAlert("操作失败",val[0],'error');
                        return false;
                    });
                }
            });
            return false;
        });
    });
</script>
</body>
</html>
{{ end }}